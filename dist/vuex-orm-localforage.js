!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VuexORMLocalForage=e():t.VuexORMLocalForage=e()}(global,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){"use strict";var r=n(9),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();e.a=i},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(17)},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}},function(t,e,n){var r=n(11),o=n(18);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(19);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";(function(t){var r=n(0),o=n(13),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i?r.a.Buffer:void 0,c=(u?u.isBuffer:void 0)||o.a;e.a=c}).call(this,n(10)(t))},function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;e.a=r},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){"use strict";(function(t){var r=n(9),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.a.process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=u}).call(this,n(10)(t))},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";(function(t){var r=n(0),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.a.Buffer:void 0,u=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(10)(t))},function(t,e,n){var r;t.exports=function t(e,n,o){function i(u,c){if(!n[u]){if(!e[u]){if(!c&&"function"==typeof r&&r)return r(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return i(n||t)},f,f.exports,t,e,n,o)}return n[u].exports}for(var a="function"==typeof r&&r,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){(function(t){"use strict";var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(f),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),n=function(){u.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var c=new t.MessageChannel;c.port1.onmessage=f,n=function(){c.port2.postMessage(0)}}var s=[];function f(){var t,e;r=!0;for(var n=s.length;n;){for(e=s,s=[],t=-1;++t<n;)e[t]();n=s.length}r=!1}e.exports=function(t){1!==s.push(t)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function o(){}var i={},a=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function f(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(t,e,n){r(function(){var r;try{r=e(n)}catch(e){return i.reject(t,e)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)})}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}var a=p(function(){e(o,r)});"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=s,s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){if("function"!=typeof t&&this.state===u||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?l(n,this.state===u?t:e,this.outcome):this.queue.push(new f(n,t,e)),n},f.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){i.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=p(h,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=u,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},s.resolve=function(t){return t instanceof this?t:i.resolve(new this(o),t)},s.reject=function(t){var e=new this(o);return i.reject(e,t)},s.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),u=0,c=-1,s=new this(o);++c<n;)f(t[c],c);return s;function f(t,o){e.resolve(t).then(function(t){a[o]=t,++u!==n||r||(r=!0,i.resolve(s,a))},function(t){r||(r=!0,i.reject(s,t))})}},s.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a,u=-1,c=new this(o);++u<n;)a=t[u],e.resolve(a).then(function(t){r||(r=!0,i.resolve(c,t))},function(t){r||(r=!0,i.reject(c,t))});return c}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function u(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function c(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function s(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var l="local-forage-detect-blob-support",h=void 0,d={},p=Object.prototype.toString,y="readonly",v="readwrite";function m(t){return"boolean"==typeof h?a.resolve(h):function(t){return new a(function(e){var n=t.transaction(l,v),r=i([""]);n.objectStore(l).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}(t).then(function(t){return h=t})}function g(t){var e=d[t.name],n={};n.promise=new a(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function b(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function w(t,e){var n=d[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function _(t,e){return new a(function(n,r){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);g(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var a=o.open.apply(o,i);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(l)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),b(t)}})}function O(t){return _(t,!1)}function j(t){return _(t,!0)}function k(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function S(t){return i([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function I(t){var e=this,n=e._initReady().then(function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return c(n,t,t),n}function x(t,e,n,r){void 0===r&&(r=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(r>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then(function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),j(t)}).then(function(){return function(t){g(t);for(var e=d[t.name],n=e.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,O(t).then(function(e){return t.db=e,k(t)?j(t):e}).then(function(r){t.db=e.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r}).catch(function(e){throw w(t,e),e})}(t).then(function(){x(t,e,n,r-1)})}).catch(n);n(o)}}var A={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var o=d[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=I);var i=[];function u(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var s=o.forages[c];s!==e&&i.push(s._initReady().catch(u))}var f=o.forages.slice(0);return a.all(i).then(function(){return n.db=o.db,O(n)}).then(function(t){return n.db=t,k(n,e._defaultConfig.version)?j(n):t}).then(function(t){n.db=o.db=t,e._dbInfo=n;for(var r=0;r<f.length;r++){var i=f[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})},_support:function(){try{if(!o)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new a(function(e,r){n.ready().then(function(){x(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;E(r)&&(r=S(r));var o=t(r,n.key,u++);void 0!==o?e(o):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}})}).catch(r)});return u(r,e),r},getItem:function(t,e){var n=this;t=s(t);var r=new a(function(e,r){n.ready().then(function(){x(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),E(t)&&(t=S(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}})}).catch(r)});return u(r,e),r},setItem:function(t,e,n){var r=this;t=s(t);var o=new a(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===p.call(e)?m(i.db).then(function(t){return t?e:(n=e,new a(function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):e}).then(function(e){x(r._dbInfo,v,function(i,a){if(i)return o(i);try{var u=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var c=u.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=c.error?c.error:c.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return u(o,n),o},removeItem:function(t,e){var n=this;t=s(t);var r=new a(function(e,r){n.ready().then(function(){x(n._dbInfo,v,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(a.error)},i.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}})}).catch(r)});return u(r,e),r},clear:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){x(e._dbInfo,v,function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return u(n,t),n},length:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){x(e._dbInfo,y,function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(t){n(t)}})}).catch(n)});return u(n,t),n},key:function(t,e){var n=this,r=new a(function(e,r){t<0?e(null):n.ready().then(function(){x(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),u=!1,c=a.openCursor();c.onsuccess=function(){var n=c.result;n?0===t?e(n.key):u?e(n.key):(u=!0,n.advance(t)):e(null)},c.onerror=function(){r(c.error)}}catch(t){r(t)}})}).catch(r)});return u(r,e),r},keys:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){x(e._dbInfo,y,function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var e=i.result;e?(a.push(e.key),e.continue()):t(a)},i.onerror=function(){n(i.error)}}catch(t){n(t)}})}).catch(n)});return u(n,t),n},dropInstance:function(t,e){e=f.apply(this,arguments);var n,r=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName),t.name){var i=t.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):O(t).then(function(e){var n=d[t.name],r=n.forages;n.db=e;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=e;return e});n=t.storeName?i.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;g(t);var r=d[t.name],i=r.forages;e.close();for(var u=0;u<i.length;u++){var c=i[u];c._dbInfo.db=null,c._dbInfo.version=n}return new a(function(e,r){var i=o.open(t.name,n);i.onerror=function(t){i.result.close(),r(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=t,b(n._dbInfo)}}).catch(function(e){throw(w(t,e)||a.resolve()).catch(function(){}),e})}}):i.then(function(e){g(t);var n=d[t.name],r=n.forages;e.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new a(function(e,n){var r=o.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<r.length;e++)b(r[e]._dbInfo)}).catch(function(e){throw(w(t,e)||a.resolve()).catch(function(){}),e})})}else n=a.reject("Invalid arguments");return u(n,e),n}},F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R="~~local_forage_type~",M=/^~~local_forage_type~([^~]+)~/,$="__lfsc__:",K=$.length,P="arbf",N="blob",C="si08",B="ui08",T="uic8",z="si16",L="si32",D="ur16",U="ui32",H="fl32",W="fl64",q=K+P.length,G=Object.prototype.toString;function V(t){var e,n,r,o,i,a=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(e=0;e<u;e+=4)n=F.indexOf(t[e]),r=F.indexOf(t[e+1]),o=F.indexOf(t[e+2]),i=F.indexOf(t[e+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return s}function Q(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=F[n[e]>>2],r+=F[(3&n[e])<<4|n[e+1]>>4],r+=F[(15&n[e+1])<<2|n[e+2]>>6],r+=F[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var J={serialize:function(t,e){var n="";if(t&&(n=G.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===G.call(t.buffer))){var r,o=$;t instanceof ArrayBuffer?(r=t,o+=P):(r=t.buffer,"[object Int8Array]"===n?o+=C:"[object Uint8Array]"===n?o+=B:"[object Uint8ClampedArray]"===n?o+=T:"[object Int16Array]"===n?o+=z:"[object Uint16Array]"===n?o+=D:"[object Int32Array]"===n?o+=L:"[object Uint32Array]"===n?o+=U:"[object Float32Array]"===n?o+=H:"[object Float64Array]"===n?o+=W:e(new Error("Failed to get type for BinaryArray"))),e(o+Q(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=R+t.type+"~"+Q(this.result);e($+N+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,K)!==$)return JSON.parse(t);var e,n=t.substring(q),r=t.substring(K,q);if(r===N&&M.test(n)){var o=n.match(M);e=o[1],n=n.substring(o[0].length)}var a=V(n);switch(r){case P:return a;case N:return i([a],{type:e});case C:return new Int8Array(a);case B:return new Uint8Array(a);case T:return new Uint8ClampedArray(a);case z:return new Int16Array(a);case D:return new Uint16Array(a);case L:return new Int32Array(a);case U:return new Uint32Array(a);case H:return new Float32Array(a);case W:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:V,bufferToString:Q};function Y(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function X(t,e,n,r,o,i){t.executeSql(n,r,o,function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,u){u.rows.length?i(t,a):Y(t,e,function(){t.executeSql(n,r,o,i)},i)},i):i(t,a)},i)}function Z(t,e,n,r){var o=this;t=s(t);var i=new a(function(i,a){o.ready().then(function(){void 0===e&&(e=null);var u=e,c=o._dbInfo;c.serializer.serialize(e,function(e,s){s?a(s):c.db.transaction(function(n){X(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){i(u)},function(t,e){a(e)})},function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(Z.apply(o,[t,u,n,r-1]));a(e)}})})}).catch(a)});return u(i,n),i}var tt={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new a(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction(function(o){Y(o,n,function(){e._dbInfo=n,t()},function(t,e){r(e)})},r)});return n.serializer=J,o},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new a(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){X(n,o,"SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),s=c.value;if(s&&(s=o.serializer.deserialize(s)),void 0!==(s=t(s,c.key,u+1)))return void e(s)}e()},function(t,e){r(e)})})}).catch(r)});return u(r,e),r},getItem:function(t,e){var n=this;t=s(t);var r=new a(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){X(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)},function(t,e){r(e)})})}).catch(r)});return u(r,e),r},setItem:function(t,e,n){return Z.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=s(t);var r=new a(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){X(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){r(e)})})}).catch(r)});return u(r,e),r},clear:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"DELETE FROM "+r.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return u(n,t),n},length:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(e,n){var r=n.rows.item(0).c;t(r)},function(t,e){n(e)})})}).catch(n)});return u(n,t),n},key:function(t,e){var n=this,r=new a(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){X(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)},function(t,e){r(e)})})}).catch(r)});return u(r,e),r},keys:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"SELECT key FROM "+r.storeName,[],function(e,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);t(r)},function(t,e){n(e)})})}).catch(n)});return u(n,t),n},dropInstance:function(t,e){e=f.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;return u(r=t.name?new a(function(e){var r;r=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(function(t){return new a(function(e,n){t.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:t,storeNames:o})},function(t,e){n(e)})},function(t){n(t)})})}(r))}).then(function(t){return new a(function(e,n){t.db.transaction(function(r){function o(t){return new a(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}for(var i=[],u=0,c=t.storeNames.length;u<c;u++)i.push(o(t.storeNames[u]));a.all(i).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):a.reject("Invalid arguments"),e),r}};function et(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function nt(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var rt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=et(t,this._defaultConfig),nt()?(this._dbInfo=e,e.serializer=J,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(r)){var s=localStorage.getItem(c);if(s&&(s=e.serializer.deserialize(s)),void 0!==(s=t(s,c.substring(o),a++)))return s}}});return u(r,e),r},getItem:function(t,e){var n=this;t=s(t);var r=n.ready().then(function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r});return u(r,e),r},setItem:function(t,e,n){var r=this;t=s(t);var o=r.ready().then(function(){void 0===e&&(e=null);var n=e;return new a(function(o,i){var a=r._dbInfo;a.serializer.serialize(e,function(e,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}})})});return u(o,n),o},removeItem:function(t,e){var n=this;t=s(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return u(r,e),r},clear:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}});return u(n,t),n},length:function(t){var e=this.keys().then(function(t){return t.length});return u(e,t),e},key:function(t,e){var n=this,r=n.ready().then(function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e});return u(r,e),r},keys:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r});return u(n,t),n},dropInstance:function(t,e){if(e=f.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return u(r=t.name?new a(function(e){t.storeName?e(et(t,o._defaultConfig)):e(t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):a.reject("Invalid arguments"),e),r}},ot=function(t,e){for(var n,r,o=t.length,i=0;i<o;){if((n=t[i])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;i++}return!1},it=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},at={},ut={},ct={INDEXEDDB:A,WEBSQL:tt,LOCALSTORAGE:rt},st=[ct.INDEXEDDB._driver,ct.WEBSQL._driver,ct.LOCALSTORAGE._driver],ft=["dropInstance"],lt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ft),ht={description:"",driver:st.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function dt(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function pt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(it(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var yt=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct)if(ct.hasOwnProperty(n)){var r=ct[n],o=r._driver;this[n]=o,at[o]||this.defineDriver(r)}this._defaultConfig=pt({},ht),this._config=pt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new a(function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var i=lt.concat("_initStorage"),c=0,s=i.length;c<s;c++){var f=i[c];if((!ot(ft,f)||t[f])&&"function"!=typeof t[f])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return u(n,arguments[arguments.length-1]),n}},n=0,r=ft.length;n<r;n++){var o=ft[n];t[o]||(t[o]=e(o))}}();var l=function(n){at[r]&&console.info("Redefining LocalForage driver: "+r),at[r]=t,ut[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(l,n):l(!!t._support):l(!0)}catch(t){n(t)}});return c(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=at[t]?a.resolve(at[t]):a.reject(new Error("Driver not found."));return c(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(J);return c(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return c(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;it(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function u(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}var s=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=s.then(function(){var t=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then(function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(u).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)})}).catch(function(){i();var t=new Error("No available storage method found.");return r._driverSet=a.reject(t),r._driverSet}),c(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!ut[t]},t.prototype._extend=function(t){pt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=lt.length;t<e;t++)dt(this,lt[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=yt},{3:3}]},{},[4])(4)},,function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new I(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=k(a,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=s(t,e,n);if("normal"===c.type){if(r=n.done?d:l,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",l="suspendedYield",h="executing",d="completed",p={};function y(){}function v(){}function m(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==n&&r.call(w,i)&&(g=w);var _=m.prototype=y.prototype=Object.create(g);function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(t){var e;this._invoke=function(n,o){function i(){return new Promise(function(e,i){!function e(n,o,i,a){var u=s(t[n],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?Promise.resolve(f.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(f).then(function(t){c.value=t,i(c)},function(t){return e("throw",t,i,a)})}a(u.arg)}(n,o,e,i)})}return e=e?e.then(i,i):i()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=s(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return v.prototype=_.constructor=m,m.constructor=v,m[u]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},O(j.prototype),j.prototype[a]=function(){return this},t.AsyncIterator=j,t.async=function(e,n,r,o){var i=new j(c(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(_),_[u]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:x(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=n(2),a=n.n(i);var u=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var c=function(){this.__data__=[],this.size=0};var s=function(t,e){return t===e||t!=t&&e!=e};var f=function(t,e){for(var n=t.length;n--;)if(s(t[n][0],e))return n;return-1},l=Array.prototype.splice;var h=function(t){var e=this.__data__,n=f(e,t);return!(n<0)&&(n==e.length-1?e.pop():l.call(e,n,1),--this.size,!0)};var d=function(t){var e=this.__data__,n=f(e,t);return n<0?void 0:e[n][1]};var p=function(t){return f(this.__data__,t)>-1};var y=function(t,e){var n=this.__data__,r=f(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function v(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}v.prototype.clear=c,v.prototype.delete=h,v.prototype.get=d,v.prototype.has=p,v.prototype.set=y;var m=v;var g=function(){this.__data__=new m,this.size=0};var b=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var w=function(t){return this.__data__.get(t)};var _=function(t){return this.__data__.has(t)},O=n(0),j=O.a.Symbol,k=Object.prototype,S=k.hasOwnProperty,E=k.toString,I=j?j.toStringTag:void 0;var x=function(t){var e=S.call(t,I),n=t[I];try{t[I]=void 0;var r=!0}catch(t){}var o=E.call(t);return r&&(e?t[I]=n:delete t[I]),o},A=Object.prototype.toString;var F=function(t){return A.call(t)},R="[object Null]",M="[object Undefined]",$=j?j.toStringTag:void 0;var K=function(t){return null==t?void 0===t?M:R:$&&$ in Object(t)?x(t):F(t)};var P=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},N="[object AsyncFunction]",C="[object Function]",B="[object GeneratorFunction]",T="[object Proxy]";var z,L=function(t){if(!P(t))return!1;var e=K(t);return e==C||e==B||e==N||e==T},D=O.a["__core-js_shared__"],U=(z=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var H=function(t){return!!U&&U in t},W=Function.prototype.toString;var q=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},G=/^\[object .+?Constructor\]$/,V=Function.prototype,Q=Object.prototype,J=V.toString,Y=Q.hasOwnProperty,X=RegExp("^"+J.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Z=function(t){return!(!P(t)||H(t))&&(L(t)?X:G).test(q(t))};var tt=function(t,e){return null==t?void 0:t[e]};var et=function(t,e){var n=tt(t,e);return Z(n)?n:void 0},nt=et(O.a,"Map"),rt=et(Object,"create");var ot=function(){this.__data__=rt?rt(null):{},this.size=0};var it=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},at="__lodash_hash_undefined__",ut=Object.prototype.hasOwnProperty;var ct=function(t){var e=this.__data__;if(rt){var n=e[t];return n===at?void 0:n}return ut.call(e,t)?e[t]:void 0},st=Object.prototype.hasOwnProperty;var ft=function(t){var e=this.__data__;return rt?void 0!==e[t]:st.call(e,t)},lt="__lodash_hash_undefined__";var ht=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&void 0===e?lt:e,this};function dt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}dt.prototype.clear=ot,dt.prototype.delete=it,dt.prototype.get=ct,dt.prototype.has=ft,dt.prototype.set=ht;var pt=dt;var yt=function(){this.size=0,this.__data__={hash:new pt,map:new(nt||m),string:new pt}};var vt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var mt=function(t,e){var n=t.__data__;return vt(e)?n["string"==typeof e?"string":"hash"]:n.map};var gt=function(t){var e=mt(this,t).delete(t);return this.size-=e?1:0,e};var bt=function(t){return mt(this,t).get(t)};var wt=function(t){return mt(this,t).has(t)};var _t=function(t,e){var n=mt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ot.prototype.clear=yt,Ot.prototype.delete=gt,Ot.prototype.get=bt,Ot.prototype.has=wt,Ot.prototype.set=_t;var jt=Ot,kt=200;var St=function(t,e){var n=this.__data__;if(n instanceof m){var r=n.__data__;if(!nt||r.length<kt-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new jt(r)}return n.set(t,e),this.size=n.size,this};function Et(t){var e=this.__data__=new m(t);this.size=e.size}Et.prototype.clear=g,Et.prototype.delete=b,Et.prototype.get=w,Et.prototype.has=_,Et.prototype.set=St;var It=Et,xt="__lodash_hash_undefined__";var At=function(t){return this.__data__.set(t,xt),this};var Ft=function(t){return this.__data__.has(t)};function Rt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new jt;++e<n;)this.add(t[e])}Rt.prototype.add=Rt.prototype.push=At,Rt.prototype.has=Ft;var Mt=Rt;var $t=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Kt=function(t,e){return t.has(e)},Pt=1,Nt=2;var Ct=function(t,e,n,r,o,i){var a=n&Pt,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(t);if(s&&i.get(e))return s==e;var f=-1,l=!0,h=n&Nt?new Mt:void 0;for(i.set(t,e),i.set(e,t);++f<u;){var d=t[f],p=e[f];if(r)var y=a?r(p,d,f,e,t,i):r(d,p,f,t,e,i);if(void 0!==y){if(y)continue;l=!1;break}if(h){if(!$t(e,function(t,e){if(!Kt(h,e)&&(d===t||o(d,t,n,r,i)))return h.push(e)})){l=!1;break}}else if(d!==p&&!o(d,p,n,r,i)){l=!1;break}}return i.delete(t),i.delete(e),l},Bt=O.a.Uint8Array;var Tt=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var zt=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Lt=1,Dt=2,Ut="[object Boolean]",Ht="[object Date]",Wt="[object Error]",qt="[object Map]",Gt="[object Number]",Vt="[object RegExp]",Qt="[object Set]",Jt="[object String]",Yt="[object Symbol]",Xt="[object ArrayBuffer]",Zt="[object DataView]",te=j?j.prototype:void 0,ee=te?te.valueOf:void 0;var ne=function(t,e,n,r,o,i,a){switch(n){case Zt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xt:return!(t.byteLength!=e.byteLength||!i(new Bt(t),new Bt(e)));case Ut:case Ht:case Gt:return s(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case Vt:case Jt:return t==e+"";case qt:var u=Tt;case Qt:var c=r&Lt;if(u||(u=zt),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;r|=Dt,a.set(t,e);var l=Ct(u(t),u(e),r,o,i,a);return a.delete(t),l;case Yt:if(ee)return ee.call(t)==ee.call(e)}return!1};var re=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},oe=Array.isArray;var ie=function(t,e,n){var r=e(t);return oe(t)?r:re(r,n(t))};var ae=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var ue=function(){return[]},ce=Object.prototype.propertyIsEnumerable,se=Object.getOwnPropertySymbols,fe=se?function(t){return null==t?[]:(t=Object(t),ae(se(t),function(e){return ce.call(t,e)}))}:ue;var le=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var he=function(t){return null!=t&&"object"==typeof t},de="[object Arguments]";var pe=function(t){return he(t)&&K(t)==de},ye=Object.prototype,ve=ye.hasOwnProperty,me=ye.propertyIsEnumerable,ge=pe(function(){return arguments}())?pe:function(t){return he(t)&&ve.call(t,"callee")&&!me.call(t,"callee")},be=n(8),we=9007199254740991,_e=/^(?:0|[1-9]\d*)$/;var Oe=function(t,e){var n=typeof t;return!!(e=null==e?we:e)&&("number"==n||"symbol"!=n&&_e.test(t))&&t>-1&&t%1==0&&t<e},je=9007199254740991;var ke=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=je},Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object Boolean]"]=Se["[object DataView]"]=Se["[object Date]"]=Se["[object Error]"]=Se["[object Function]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object WeakMap]"]=!1;var Ee=function(t){return he(t)&&ke(t.length)&&!!Se[K(t)]};var Ie=function(t){return function(e){return t(e)}},xe=n(12),Ae=xe.a&&xe.a.isTypedArray,Fe=Ae?Ie(Ae):Ee,Re=Object.prototype.hasOwnProperty;var Me=function(t,e){var n=oe(t),r=!n&&ge(t),o=!n&&!r&&Object(be.a)(t),i=!n&&!r&&!o&&Fe(t),a=n||r||o||i,u=a?le(t.length,String):[],c=u.length;for(var s in t)!e&&!Re.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Oe(s,c))||u.push(s);return u},$e=Object.prototype;var Ke=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$e)};var Pe=function(t,e){return function(n){return t(e(n))}},Ne=Pe(Object.keys,Object),Ce=Object.prototype.hasOwnProperty;var Be=function(t){if(!Ke(t))return Ne(t);var e=[];for(var n in Object(t))Ce.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Te=function(t){return null!=t&&ke(t.length)&&!L(t)};var ze=function(t){return Te(t)?Me(t):Be(t)};var Le=function(t){return ie(t,ze,fe)},De=1,Ue=Object.prototype.hasOwnProperty;var He=function(t,e,n,r,o,i){var a=n&De,u=Le(t),c=u.length;if(c!=Le(e).length&&!a)return!1;for(var s=c;s--;){var f=u[s];if(!(a?f in e:Ue.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var h=!0;i.set(t,e),i.set(e,t);for(var d=a;++s<c;){var p=t[f=u[s]],y=e[f];if(r)var v=a?r(y,p,f,e,t,i):r(p,y,f,t,e,i);if(!(void 0===v?p===y||o(p,y,n,r,i):v)){h=!1;break}d||(d="constructor"==f)}if(h&&!d){var m=t.constructor,g=e.constructor;m!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g)&&(h=!1)}return i.delete(t),i.delete(e),h},We=et(O.a,"DataView"),qe=et(O.a,"Promise"),Ge=et(O.a,"Set"),Ve=et(O.a,"WeakMap"),Qe=q(We),Je=q(nt),Ye=q(qe),Xe=q(Ge),Ze=q(Ve),tn=K;(We&&"[object DataView]"!=tn(new We(new ArrayBuffer(1)))||nt&&"[object Map]"!=tn(new nt)||qe&&"[object Promise]"!=tn(qe.resolve())||Ge&&"[object Set]"!=tn(new Ge)||Ve&&"[object WeakMap]"!=tn(new Ve))&&(tn=function(t){var e=K(t),n="[object Object]"==e?t.constructor:void 0,r=n?q(n):"";if(r)switch(r){case Qe:return"[object DataView]";case Je:return"[object Map]";case Ye:return"[object Promise]";case Xe:return"[object Set]";case Ze:return"[object WeakMap]"}return e});var en=tn,nn=1,rn="[object Arguments]",on="[object Array]",an="[object Object]",un=Object.prototype.hasOwnProperty;var cn=function(t,e,n,r,o,i){var a=oe(t),u=oe(e),c=a?on:en(t),s=u?on:en(e),f=(c=c==rn?an:c)==an,l=(s=s==rn?an:s)==an,h=c==s;if(h&&Object(be.a)(t)){if(!Object(be.a)(e))return!1;a=!0,f=!1}if(h&&!f)return i||(i=new It),a||Fe(t)?Ct(t,e,n,r,o,i):ne(t,e,c,n,r,o,i);if(!(n&nn)){var d=f&&un.call(t,"__wrapped__"),p=l&&un.call(e,"__wrapped__");if(d||p){var y=d?t.value():t,v=p?e.value():e;return i||(i=new It),o(y,v,n,r,i)}}return!!h&&(i||(i=new It),He(t,e,n,r,o,i))};var sn=function t(e,n,r,o,i){return e===n||(null==e||null==n||!he(e)&&!he(n)?e!=e&&n!=n:cn(e,n,r,o,t,i))},fn=1,ln=2;var hn=function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=n[o])[0],s=t[c],f=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new It;if(r)var h=r(s,f,c,t,e,l);if(!(void 0===h?sn(f,s,fn|ln,r,l):h))return!1}}return!0};var dn=function(t){return t==t&&!P(t)};var pn=function(t){for(var e=ze(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,dn(o)]}return e};var yn=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var vn=function(t){var e=pn(t);return 1==e.length&&e[0][2]?yn(e[0][0],e[0][1]):function(n){return n===t||hn(n,t,e)}},mn="[object Symbol]";var gn=function(t){return"symbol"==typeof t||he(t)&&K(t)==mn},bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/;var _n=function(t,e){if(oe(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!gn(t))||(wn.test(t)||!bn.test(t)||null!=e&&t in Object(e))},On="Expected a function";function jn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(On);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(jn.Cache||jt),n}jn.Cache=jt;var kn=jn,Sn=500;var En=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,In=/\\(\\)?/g,xn=function(t){var e=kn(t,function(t){return n.size===Sn&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(En,function(t,n,r,o){e.push(r?o.replace(In,"$1"):n||t)}),e}),An=1/0,Fn=j?j.prototype:void 0,Rn=Fn?Fn.toString:void 0;var Mn=function t(e){if("string"==typeof e)return e;if(oe(e))return u(e,t)+"";if(gn(e))return Rn?Rn.call(e):"";var n=e+"";return"0"==n&&1/e==-An?"-0":n};var $n=function(t){return null==t?"":Mn(t)};var Kn=function(t,e){return oe(t)?t:_n(t,e)?[t]:xn($n(t))},Pn=1/0;var Nn=function(t){if("string"==typeof t||gn(t))return t;var e=t+"";return"0"==e&&1/t==-Pn?"-0":e};var Cn=function(t,e){for(var n=0,r=(e=Kn(e,t)).length;null!=t&&n<r;)t=t[Nn(e[n++])];return n&&n==r?t:void 0};var Bn=function(t,e,n){var r=null==t?void 0:Cn(t,e);return void 0===r?n:r};var Tn=function(t,e){return null!=t&&e in Object(t)};var zn=function(t,e,n){for(var r=-1,o=(e=Kn(e,t)).length,i=!1;++r<o;){var a=Nn(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ke(o)&&Oe(a,o)&&(oe(t)||ge(t))};var Ln=function(t,e){return null!=t&&zn(t,e,Tn)},Dn=1,Un=2;var Hn=function(t,e){return _n(t)&&dn(e)?yn(Nn(t),e):function(n){var r=Bn(n,t);return void 0===r&&r===e?Ln(n,t):sn(e,r,Dn|Un)}};var Wn=function(t){return t};var qn=function(t){return function(e){return null==e?void 0:e[t]}};var Gn=function(t){return function(e){return Cn(e,t)}};var Vn=function(t){return _n(t)?qn(Nn(t)):Gn(t)};var Qn=function(t){return"function"==typeof t?t:null==t?Wn:"object"==typeof t?oe(t)?Hn(t[0],t[1]):vn(t):Vn(t)};var Jn=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var c=a[t?u:++o];if(!1===n(i[c],c,i))break}return e}}();var Yn=function(t,e){return function(n,r){if(null==n)return n;if(!Te(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}(function(t,e){return t&&Jn(t,e,ze)});var Xn=function(t,e){var n=-1,r=Te(t)?Array(t.length):[];return Yn(t,function(t,o,i){r[++n]=e(t,o,i)}),r};var Zn=function(t,e){return(oe(t)?u:Xn)(t,Qn(e,3))},tr=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var er=function(t,e,n){"__proto__"==e&&tr?tr(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var nr=function(t,e,n){(void 0===n||s(t[e],n))&&(void 0!==n||e in t)||er(t,e,n)},rr=n(14);var or=function(t){var e=new t.constructor(t.byteLength);return new Bt(e).set(new Bt(t)),e};var ir=function(t,e){var n=e?or(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var ar=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},ur=Object.create,cr=function(){function t(){}return function(e){if(!P(e))return{};if(ur)return ur(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),sr=Pe(Object.getPrototypeOf,Object);var fr=function(t){return"function"!=typeof t.constructor||Ke(t)?{}:cr(sr(t))};var lr=function(t){return he(t)&&Te(t)},hr="[object Object]",dr=Function.prototype,pr=Object.prototype,yr=dr.toString,vr=pr.hasOwnProperty,mr=yr.call(Object);var gr=function(t){if(!he(t)||K(t)!=hr)return!1;var e=sr(t);if(null===e)return!0;var n=vr.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yr.call(n)==mr};var br=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},wr=Object.prototype.hasOwnProperty;var _r=function(t,e,n){var r=t[e];wr.call(t,e)&&s(r,n)&&(void 0!==n||e in t)||er(t,e,n)};var Or=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=r?r(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),o?er(n,u,c):_r(n,u,c)}return n};var jr=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},kr=Object.prototype.hasOwnProperty;var Sr=function(t){if(!P(t))return jr(t);var e=Ke(t),n=[];for(var r in t)("constructor"!=r||!e&&kr.call(t,r))&&n.push(r);return n};var Er=function(t){return Te(t)?Me(t,!0):Sr(t)};var Ir=function(t){return Or(t,Er(t))};var xr=function(t,e,n,r,o,i,a){var u=br(t,n),c=br(e,n),s=a.get(c);if(s)nr(t,n,s);else{var f=i?i(u,c,n+"",t,e,a):void 0,l=void 0===f;if(l){var h=oe(c),d=!h&&Object(be.a)(c),p=!h&&!d&&Fe(c);f=c,h||d||p?oe(u)?f=u:lr(u)?f=ar(u):d?(l=!1,f=Object(rr.a)(c,!0)):p?(l=!1,f=ir(c,!0)):f=[]:gr(c)||ge(c)?(f=u,ge(u)?f=Ir(u):P(u)&&!L(u)||(f=fr(c))):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c)),nr(t,n,f)}};var Ar=function t(e,n,r,o,i){e!==n&&Jn(n,function(a,u){if(i||(i=new It),P(a))xr(e,n,u,r,t,o,i);else{var c=o?o(br(e,u),a,u+"",e,n,i):void 0;void 0===c&&(c=a),nr(e,u,c)}},Er)};var Fr=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Rr=Math.max;var Mr=function(t,e,n){return e=Rr(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Rr(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),Fr(t,this,u)}};var $r=function(t){return function(){return t}},Kr=tr?function(t,e){return tr(t,"toString",{configurable:!0,enumerable:!1,value:$r(e),writable:!0})}:Wn,Pr=800,Nr=16,Cr=Date.now;var Br=function(t){var e=0,n=0;return function(){var r=Cr(),o=Nr-(r-n);if(n=r,o>0){if(++e>=Pr)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Kr);var Tr=function(t,e){return Br(Mr(t,e,Wn),t+"")};var zr=function(t,e,n){if(!P(n))return!1;var r=typeof e;return!!("number"==r?Te(n)&&Oe(e,n.length):"string"==r&&e in n)&&s(n[e],t)};var Lr=function(t){return Tr(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&zr(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e})}(function(t,e,n){Ar(t,e,n)});var Dr=function(t){return function(e,n,r){var o=Object(e);if(!Te(e)){var i=Qn(n,3);e=ze(e),n=function(t){return i(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[i?e[a]:a]:void 0}};var Ur=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1},Hr=NaN,Wr=/^\s+|\s+$/g,qr=/^[-+]0x[0-9a-f]+$/i,Gr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,Qr=parseInt;var Jr=function(t){if("number"==typeof t)return t;if(gn(t))return Hr;if(P(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=P(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Wr,"");var n=Gr.test(t);return n||Vr.test(t)?Qr(t.slice(2),n?2:8):qr.test(t)?Hr:+t},Yr=1/0,Xr=17976931348623157e292;var Zr=function(t){return t?(t=Jr(t))===Yr||t===-Yr?(t<0?-1:1)*Xr:t==t?t:0:0===t?t:0};var to=function(t){var e=Zr(t),n=e%1;return e==e?n?e-n:e:0},eo=Math.max;var no=Dr(function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:to(n);return o<0&&(o=eo(r+o,0)),Ur(t,Qn(e,3),o)});function ro(t,e){return t(e={exports:{}},e.exports),e.exports}var oo=ro(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),io=ro(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),ao=(io.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),uo=function(t){if(!ao(t))throw TypeError(t+" is not an object!");return t},co=function(t){try{return!!t()}catch(t){return!0}},so=!co(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),fo=oo.document,lo=ao(fo)&&ao(fo.createElement),ho=!so&&!co(function(){return 7!=Object.defineProperty((t="div",lo?fo.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),po=Object.defineProperty,yo={f:so?Object.defineProperty:function(t,e,n){if(uo(t),e=function(t,e){if(!ao(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!ao(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!ao(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!ao(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),uo(n),ho)try{return po(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},vo=so?function(t,e,n){return yo.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},mo={}.hasOwnProperty,go=function(t,e){return mo.call(t,e)},bo=0,wo=Math.random(),_o=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++bo+wo).toString(36))},Oo=ro(function(t){var e=oo["__core-js_shared__"]||(oo["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:io.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),jo=Oo("native-function-to-string",Function.toString),ko=ro(function(t){var e=_o("src"),n=(""+jo).split("toString");io.inspectSource=function(t){return jo.call(t)},(t.exports=function(t,r,o,i){var a="function"==typeof o;a&&(go(o,"name")||vo(o,"name",r)),t[r]!==o&&(a&&(go(o,e)||vo(o,e,t[r]?""+t[r]:n.join(String(r)))),t===oo?t[r]=o:i?t[r]?t[r]=o:vo(t,r,o):(delete t[r],vo(t,r,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||jo.call(this)})}),So=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Eo=function(t,e,n){var r,o,i,a,u=t&Eo.F,c=t&Eo.G,s=t&Eo.S,f=t&Eo.P,l=t&Eo.B,h=c?oo:s?oo[e]||(oo[e]={}):(oo[e]||{}).prototype,d=c?io:io[e]||(io[e]={}),p=d.prototype||(d.prototype={});for(r in c&&(n=e),n)i=((o=!u&&h&&void 0!==h[r])?h:n)[r],a=l&&o?So(i,oo):f&&"function"==typeof i?So(Function.call,i):i,h&&ko(h,r,i,t&Eo.U),d[r]!=i&&vo(d,r,a),f&&p[r]!=i&&(p[r]=i)};oo.core=io,Eo.F=1,Eo.G=2,Eo.S=4,Eo.P=8,Eo.B=16,Eo.W=32,Eo.U=64,Eo.R=128;var Io=Eo,xo={}.toString,Ao=function(t){return xo.call(t).slice(8,-1)},Fo=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Ao(t)?t.split(""):Object(t)},Ro=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Mo=function(t){return Fo(Ro(t))},$o=Math.ceil,Ko=Math.floor,Po=function(t){return isNaN(t=+t)?0:(t>0?Ko:$o)(t)},No=Math.min,Co=function(t){return t>0?No(Po(t),9007199254740991):0},Bo=Math.max,To=Math.min,zo=function(t){return function(e,n,r){var o,i=Mo(e),a=Co(i.length),u=function(t,e){return(t=Po(t))<0?Bo(t+e,0):To(t,e)}(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},Lo=ro(function(t){var e=Oo("wks"),n=oo.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:_o)("Symbol."+t))}).store=e}),Do=Lo("unscopables"),Uo=Array.prototype;null==Uo[Do]&&vo(Uo,Do,{});var Ho,Wo=zo(!0);Io(Io.P,"Array",{includes:function(t){return Wo(this,t,arguments.length>1?arguments[1]:void 0)}}),Ho="includes",Uo[Do][Ho]=!0;io.Array.includes;var qo=Oo("keys"),Go=zo(!1),Vo=function(t){return qo[t]||(qo[t]=_o(t))}("IE_PROTO"),Qo="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Jo=Object.keys||function(t){return function(t,e){var n,r=Mo(t),o=0,i=[];for(n in r)n!=Vo&&go(r,n)&&i.push(n);for(;e.length>o;)go(r,n=e[o++])&&(~Go(i,n)||i.push(n));return i}(t,Qo)},Yo={f:Object.getOwnPropertySymbols},Xo={f:{}.propertyIsEnumerable},Zo=function(t){return Object(Ro(t))},ti=Object.assign,ei=!ti||co(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ti({},t)[n]||Object.keys(ti({},e)).join("")!=r})?function(t,e){for(var n=Zo(t),r=arguments.length,o=1,i=Yo.f,a=Xo.f;r>o;)for(var u,c=Fo(arguments[o++]),s=i?Jo(c).concat(i(c)):Jo(c),f=s.length,l=0;f>l;)u=s[l++],so&&!a.call(c,u)||(n[u]=c[u]);return n}:ti;Io(Io.S+Io.F,"Object",{assign:ei});io.Object.assign;var ni=Xo.f,ri=function(t){return function(e){for(var n,r=Mo(e),o=Jo(r),i=o.length,a=0,u=[];i>a;)n=o[a++],so&&!ni.call(r,n)||u.push(t?[n,r[n]]:r[n]);return u}},oi=ri(!0);Io(Io.S,"Object",{entries:function(t){return oi(t)}});io.Object.entries;var ii=ri(!1);Io(Io.S,"Object",{values:function(t){return ii(t)}});io.Object.values;var ai=Lo("match"),ui=function(t,e,n){if(ao(r=e)&&(void 0!==(o=r[ai])?o:"RegExp"==Ao(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,o;return String(Ro(t))},ci=Lo("match"),si="".startsWith;Io(Io.P+Io.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ci]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=ui(this,t,"startsWith"),n=Co(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return si?si.call(e,r,n):e.slice(n,n+r.length)===r}});io.String.startsWith;var fi=function(){function t(){}return t.register=function(t){this.database=t},t}(),li=function(t,e){return(li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function hi(t,e){function n(){this.constructor=t}li(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var di=function(){return(di=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function pi(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}c((r=r.apply(t,e||[])).next())})}function yi(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function vi(t,e){if(t!==e){if(t>e)return 1;if(t<e)return-1}return 0}var mi={isEmpty:function(t){return Array.isArray(t)?0===t.length:0===Object.keys(t).length},forOwn:function(t,e){Object.keys(t).forEach(function(n){return e(t[n],n,t)})},groupBy:function(t,e){return t.reduce(function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t},{})},map:function(t,e){return Object.keys(t).map(function(n){return e(t[n],n,t)})},mapValues:function(t,e){var n=Object.assign({},t);return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r,t),n},n)},orderBy:function(t,e,n){var r=-1;return function(t,e){var n=t.length;t.sort(e);for(;n--;)t[n]=t[n].value;return t}(t.map(function(t){return{criteria:e.map(function(e){return t[e]}),index:++r,value:t}}),function(t,e){return function(t,e,n){var r=t.criteria,o=e.criteria,i=r.length,a=n.length,u=-1;for(;++u<i;){var c=vi(r[u],o[u]);if(c){if(u>=a)return c;var s=n[u];return c*("desc"===s?-1:1)}}return t.index-e.index}(t,e,n)})},pickBy:function(t,e){return Object.keys(t).reduce(function(n,r){var o=t[r];return e(o,r)&&(n[r]=o),n},{})}},gi=function(t){this.model=t},bi=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.isNullable=!1,o.value=n,o.mutator=r,o}return hi(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(gi),wi=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.value=n,o}return hi(e,t),e.prototype.make=function(t,e,n){var r=t=void 0!==t?t:this.value;return"function"==typeof t&&(r=t()),this.mutate(r,n)},e}(bi),_i=function(t){function e(e){return t.call(this,e,null)||this}return hi(e,t),e.prototype.make=function(t,e,n){return"number"==typeof t?t:null},e}(bi),Oi=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return hi(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"string"==typeof t?t:null===t&&this.isNullable?t:t+""},e}(bi),ji=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return hi(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(bi),ki=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return hi(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(bi),Si=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hi(e,t),e.prototype.getRelation=function(t,e,n){var r=t.newQuery(e);return n.forEach(function(t){t(r)}),r},e.prototype.getKeys=function(t,e){return t.reduce(function(t,n){return null===n[e]||void 0===n[e]?t:(t.push(n[e]),t)},[])},e.prototype.mapSingleRelations=function(t,e){return t.reduce(function(t,n){return t[n[e]]=n,t},{})},e.prototype.mapManyRelations=function(t,e){return t.reduce(function(t,n){var r=n[e];return t[r]||(t[r]=[]),t[r].push(n),t},{})},e.prototype.isOneRelation=function(t){return!Array.isArray(t)&&null!==t&&"object"==typeof t},e.prototype.isManyRelation=function(t){return!!Array.isArray(t)&&!(t.length<1)},e.prototype.makeManyRelation=function(t,e){var n=this;return this.isManyRelation(t)?t.filter(function(t){return n.isOneRelation(t)}).map(function(t){return new e(t)}):[]},e}(gi),Ei=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.related=i.model.relation(n),i.foreignKey=r,i.localKey=o,i}return hi(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity];r&&r[t]&&void 0===r[t][this.foreignKey]&&(e[this.localKey]||(e[this.localKey]=e.$id),r[t][this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,n){return this.isOneRelation(t)?new this.related(t):null},e.prototype.load=function(t,e,n,r){var o=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(o,e),this.match(e,o.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[r.localKey],i=o[e];t[n]=i||null})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,n){return t[n[e.foreignKey]]=n,t},{})},e}(Si),Ii=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(n),i.foreignKey=r,i.ownerKey=o,i}return hi(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.make=function(t,e,n){return this.isOneRelation(t)?new this.parent(t):null},e.prototype.load=function(t,e,n,r){var o=this.getRelation(t,this.parent.entity,r);this.addEagerConstraints(o,e),this.match(e,o.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,n){var r=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[r.foreignKey],i=null!==e?o[e]:null;t[n]=i||null})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,n){return t[n[e.ownerKey]]=n,t},{})},e}(Si),xi=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.related=i.model.relation(n),i.foreignKey=r,i.localKey=o,i}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;Array.isArray(t)&&t.forEach(function(t){var o=n[r.related.entity];o&&o[t]&&void 0===o[t][r.foreignKey]&&(o[t][r.foreignKey]=e[r.localKey])})},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(o,e),this.match(e,o.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[r.localKey],i=o[e];t[n]=i||[]})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,n){var r=n[e.foreignKey];return t[r]||(t[r]=[]),t[r].push(n),t},{})},e}(Si),Ai=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(n),i.foreignKey=r,i.ownerKey=o,i}return hi(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){0!==t.length&&void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.parent.entity,r);this.addConstraintForHasManyBy(i,e);var a=this.mapSingleRelations(i.get(),this.ownerKey);e.forEach(function(t){var e=o.getRelatedRecords(a,t[o.foreignKey]);t[n]=e})},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce(function(t,e){return t.concat(e[n.foreignKey])},[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){return e.reduce(function(e,n){var r=t[n];return r&&e.push(r),e},[])},e}(Si),Fi=function(t){function e(e,n,r,o,i,a,u){var c=t.call(this,e)||this;return c.related=c.model.relation(n),c.through=c.model.relation(r),c.firstKey=o,c.secondKey=i,c.localKey=a,c.secondLocalKey=u,c}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(a,e);var u=a.get();this.addEagerConstraintForRelated(i,u);var c=this.mapThroughRelations(u,i);e.forEach(function(t){var e=c[t[o.localKey]];t[n]=e||[]})},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce(function(t,e){var o=e[n.firstKey];t[o]||(t[o]=[]);var i=r[e[n.secondLocalKey]];return t[o]=t[o].concat(i),t},{})},e}(Si),Ri=function(t){function e(e,n,r,o,i,a,u){var c=t.call(this,e)||this;return c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.foreignPivotKey=o,c.relatedPivotKey=i,c.parentKey=a,c.relatedKey=u,c}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e);var u=a.get();this.addEagerConstraintForRelated(i,u);var c=this.mapPivotRelations(u,i);e.forEach(function(t){var e=c[t[o.parentKey]];t[n]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.foreignPivotKey];t[o]||(t[o]=[]);var i=r[e[n.relatedPivotKey]];return i&&(t[o]=t[o].concat(i)),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return this.pivot.primaryKey instanceof Array==!1?e:(mi.forOwn(e[t.entity],function(t){var o=t[n];void 0!==o&&0!==o.length&&r.createPivotRecord(e,t,o)}),e)},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach(function(n){var o,i,a=e[r.parentKey],u=t[r.related.entity][n][r.relatedKey],c=u+"_"+a,s=t[r.pivot.entity]?t[r.pivot.entity][c]:{};t[r.pivot.entity]=di({},t[r.pivot.entity],((o={})[c]=di({},s,((i={$id:c})[r.foreignPivotKey]=a,i[r.relatedPivotKey]=u,i)),o))})},e}(Si),Mi=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.id=n,o.type=r,o}return hi(e,t),e.prototype.define=function(t){var e=this;return t.union(function(t,n){return n[e.type]})},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){if(!this.isOneRelation(t))return null;var r=e[this.type],o=this.model.relation(r);return o?new o(t):null},e.prototype.load=function(t,e,n,r){var o=this,i=this.getTypes(e).reduce(function(e,n){var i=o.getRelation(t,n,r);return e[n]=o.mapSingleRelations(i.get(),"$id"),e},{});e.forEach(function(t){var e=t[o.id],r=t[o.type],a=i[r][e];t[n]=a||null})},e.prototype.getTypes=function(t){var e=this;return t.reduce(function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t},[])},e}(Si),$i=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.related=a.model.relation(n),a.id=r,a.type=o,a.localKey=i,a}return hi(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.id]=r[this.id]||e.$id,r[this.type]=r[this.type]||this.model.entity)},e.prototype.make=function(t,e,n){return this.isOneRelation(t)?new this.related(t):null},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphOne(i,e,t.entity);var a=this.mapSingleRelations(i.get(),this.id);e.forEach(function(t){var e=a[t[o.localKey]];t[n]=e||null})},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(Si),Ki=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.related=a.model.relation(n),a.id=r,a.type=o,a.localKey=i,a}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;if(Array.isArray(t)){var o=n[this.related.entity];t.forEach(function(t){var n=o[t];n[r.id]=n[r.id]||e.$id,n[r.type]=n[r.type]||r.model.entity})}},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphMany(i,e,t.entity);var a=this.mapManyRelations(i.get(),this.id);e.forEach(function(t){var e=a[t[o.localKey]];t[n]=e||[]})},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(Si),Pi=function(t){function e(e,n,r,o,i,a,u,c){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.relatedId=o,s.id=i,s.type=a,s.parentKey=u,s.relatedKey=c,s}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,t.entity);var u=a.get();this.addEagerConstraintForRelated(i,u);var c=this.mapPivotRelations(u,i);e.forEach(function(t){var e=c[t[o.parentKey]];t[n]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.id];t[o]||(t[o]=[]);var i=r[e[n.relatedId]];return t[o]=t[o].concat(i),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return mi.forOwn(e[t.entity],function(o){var i=t.query().newQuery(r.pivot.entity).where(r.id,o[r.parentKey]).where(r.type,t.entity).get().map(function(t){return t[r.parentKey]}),a=(o[n]||[]).filter(function(t){return!i.includes(t)});Array.isArray(a)&&0!==a.length&&r.createPivotRecord(t,e,o,a)}),e},e.prototype.createPivotRecord=function(t,e,n,r){var o=this;r.forEach(function(r){var i,a,u=n[o.parentKey],c=e[o.related.entity][r][o.relatedKey],s=u+"_"+r+"_"+t.entity;e[o.pivot.entity]=di({},e[o.pivot.entity],((i={})[s]=((a={$id:s})[o.relatedId]=c,a[o.id]=u,a[o.type]=t.entity,a),i))})},e}(Si),Ni=function(t){function e(e,n,r,o,i,a,u,c){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.relatedId=o,s.id=i,s.type=a,s.parentKey=u,s.relatedKey=c,s}return hi(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var o=this,i=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,this.related.entity);var u=a.get();this.addEagerConstraintForRelated(i,u);var c=this.mapPivotRelations(u,i);e.forEach(function(t){var e=c[t[o.parentKey]];t[n]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.relatedId];t[o]||(t[o]=[]);var i=r[e[n.id]];return t[o]=t[o].concat(i),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return mi.forOwn(e[t.entity],function(t){var o=t[n];Array.isArray(o)&&r.createPivotRecord(e,t,o)}),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach(function(n){var o,i,a=e[r.parentKey],u=n+"_"+a+"_"+r.related.entity;t[r.pivot.entity]=di({},t[r.pivot.entity],((o={})[u]=((i={$id:u})[r.relatedId]=a,i[r.id]=n,i[r.type]=r.related.entity,i),o))})},e}(Si),Ci=function(){function t(){}return t.serialize=function(t){var e=this,n=t.$fields();return Object.keys(n).reduce(function(n,r){var o=t[r];return n[r]=e.serializeValue(o),n},{})},t.serializeValue=function(t){return t instanceof Ti?this.serializeItem(t):Array.isArray(t)?this.serializeCollection(t):t},t.serializeItem=function(t){return t.$toJson()},t.serializeCollection=function(t){return t.map(function(t){return t instanceof Ti?t.$toJson():t})},t}(),Bi=function(){function t(){}return t.set=function(){this.value=""+this.prefix+this.count},t.get=function(){return this.value},t.increment=function(){return this.count++,this.set(),this.get()},t.count=0,t.prefix="_no_key_",t.value="",t}(),Ti=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.getFields=function(){return this.cachedFields||(this.cachedFields={}),this.cachedFields[this.entity]?this.cachedFields[this.entity]:(this.cachedFields[this.entity]=this.fields(),this.cachedFields[this.entity])},t.attr=function(t,e){return new wi(this,t,e)},t.string=function(t,e){return new Oi(this,t,e)},t.number=function(t,e){return new ji(this,t,e)},t.boolean=function(t,e){return new ki(this,t,e)},t.increment=function(){return new _i(this)},t.hasOne=function(t,e,n){return new Ei(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new Ii(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new xi(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new Ai(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,o,i){return new Fi(this,t,e,n,r,this.localKey(o),this.relation(e).localKey(i))},t.belongsToMany=function(t,e,n,r,o,i){return new Ri(this,t,e,n,r,this.localKey(o),this.relation(t).localKey(i))},t.morphTo=function(t,e){return new Mi(this,t,e)},t.morphOne=function(t,e,n,r){return new $i(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new Ki(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,o,i,a){return new Pi(this,t,e,n,r,o,this.localKey(i),this.relation(t).localKey(a))},t.morphedByMany=function(t,e,n,r,o,i,a){return new Ni(this,t,e,n,r,o,this.localKey(i),this.relation(t).localKey(a))},t.mutators=function(){return{}},t.types=function(){return{}},t.database=function(){return fi.database},t.store=function(){return this.database().store},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit(this.database().namespace+"/$mutate",{entity:this.entity,callback:t})},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.id=function(t){var e=this.primaryKey;return"string"==typeof e?t[e]:e.map(function(e){return t[e]||Bi.increment()}).join("_")},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.getAttributeClass=function(t){switch(t){case"increment":return _i;default:throw Error('The attribute name "'+t+"\" doesn't exist.")}},t.getFieldsByAttribute=function(t){var e=this.getAttributeClass(t),n=this.getFields();return Object.keys(n).reduce(function(t,r){var o=n[r];return o instanceof e&&(t[r]=o),t},{})},t.getIncrementFields=function(){return this.getFieldsByAttribute("increment")},t.hasIncrementFields=function(){return Object.keys(this.getIncrementFields()).length>0},t.pivotFields=function(){var t=[];return mi.forOwn(this.getFields(),function(e,n){var r;(e instanceof Ri||e instanceof Pi||e instanceof Ni)&&t.push(((r={})[n]=e,r))}),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hasTypes=function(){return Object.keys(this.types()).length>0},t.getTypeKeyValueFromModel=function(t){var e=t||this,n=this.types();for(var r in n)if(n[r]===e)return r;return null},t.findRelationInSubTypes=function(t){var e=this.types();for(var n in e){var r=e[n].getFields();for(var o in r)if(o===t&&r[o]instanceof Si)return r[o]}return null},t.hydrate=function(t){return new this(t).$toJson()},t.prototype.$self=function(){return this.constructor},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return pi(this,void 0,void 0,function(){return yi(this,function(n){return[2,this.$self().dispatch(t,e)]})})},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return pi(this,void 0,void 0,function(){return yi(this,function(e){return[2,this.$dispatch("create",t)]})})},t.prototype.$insert=function(t){return pi(this,void 0,void 0,function(){return yi(this,function(e){return[2,this.$dispatch("insert",t)]})})},t.prototype.$update=function(t){return pi(this,void 0,void 0,function(){return yi(this,function(e){return Array.isArray(t)?[2,this.$dispatch("update",t)]:void 0!==t.where?[2,this.$dispatch("update",t)]:void 0===this.$self().id(t)?[2,this.$dispatch("update",{where:this.$id,data:t})]:[2,this.$dispatch("update",t)]})})},t.prototype.$insertOrUpdate=function(t){return pi(this,void 0,void 0,function(){return yi(this,function(e){return[2,this.$dispatch("insertOrUpdate",t)]})})},t.prototype.$save=function(){return pi(this,void 0,void 0,function(){var t,e,n,r=this;return yi(this,function(o){switch(o.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce(function(e,n){return t[n]instanceof bi&&(e[n]=r[n]),e},{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return n=o.sent(),this.$fill(n[this.$self().entity][0]),[2,this]}})})},t.prototype.$delete=function(t){return pi(this,void 0,void 0,function(){return yi(this,function(e){return t?[2,this.$dispatch("delete",t)]:null===this.$id?[2,null]:[2,this.$dispatch("delete",this.$id)]})})},t.prototype.$deleteAll=function(){return pi(this,void 0,void 0,function(){return yi(this,function(t){return[2,this.$dispatch("deleteAll")]})})},t.prototype.$fill=function(t){var e=this,n=t||{},r=this.$fields();Object.keys(r).forEach(function(t){var o=r[t],i=n[t];e[t]=o.make(i,n,t)}),void 0!==n.$id&&(this.$id=n.$id)},t.prototype.$toJson=function(){return Ci.serialize(this)},t.prototype.toJSON=function(){return this.$toJson()},t.getModelFromRecord=function(e){if(!e)return null;if(e[this.typeKey]&&this.hasTypes()){var n=e[this.typeKey];return this.types()[n]||null}return e instanceof t?e.$self():null},t.primaryKey="id",t.typeKey="type",t.state={},t}();function zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Li(t,e,n){return e&&zi(t.prototype,e),n&&zi(t,n),t}function Di(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Di(t,e,n[e])})}return t}function Hi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Wi(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function qi(t,e,n){return Object.keys(t).reduce(function(e,r){var o=""+r;return e.has(o)?e.set(o,n(e.get(o),t[o])):e},e)}var Gi=function(t){return function(e){return Wi(e)?e.get(t):e[t]}},Vi=function(){function t(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t||"string"!=typeof t)throw new Error("Expected a string key for Entity, but found "+t+".");var r=n,o=r.idAttribute,i=void 0===o?"id":o,a=r.mergeStrategy,u=void 0===a?function(t,e){return Ui({},t,e)}:a,c=r.processStrategy,s=void 0===c?function(t){return Ui({},t)}:c;this._key=t,this._getId="function"==typeof i?i:Gi(i),this._idAttribute=i,this._mergeStrategy=u,this._processStrategy=s,this.define(e)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce(function(e,n){var r,o=t[n];return Ui({},e,((r={})[n]=o,r))},this.schema||{})},e.getId=function(t,e,n){return this._getId(t,e,n)},e.merge=function(t,e){return this._mergeStrategy(t,e)},e.normalize=function(t,e,n,r,o,i){var a=this;if(i.some(function(e){return e===t}))return this.getId(t,e,n);i.push(t);var u=this._processStrategy(t,e,n);return Object.keys(this.schema).forEach(function(t){if(u.hasOwnProperty(t)&&"object"==typeof u[t]){var e=a.schema[t];u[t]=r(u[t],u,t,e,o,i)}}),o(this,u,t,e,n),this.getId(t,e,n)},e.denormalize=function(t,e){var n=this;return Wi(t)?qi(this.schema,t,e):(Object.keys(this.schema).forEach(function(r){if(t.hasOwnProperty(r)){var o=n.schema[r];t[r]=e(t[r],o)}}),t)},Li(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),Qi=function(){function t(t,e){e&&(this._schemaAttribute="string"==typeof e?function(t){return t[e]}:e),this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=t},e.getSchemaAttribute=function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)},e.inferSchema=function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]},e.normalizeValue=function(t,e,n,r,o,i){var a=this.inferSchema(t,e,n);if(!a)return t;var u=r(t,e,n,a,o,i);return this.isSingleSchema||null==u?u:{id:u,schema:this.getSchemaAttribute(t,e,n)}},e.denormalizeValue=function(t,e){var n=Wi(t)?t.get("schema"):t.schema;return this.isSingleSchema||n?e((Wi(t)?t.get("id"):t.id)||t,this.isSingleSchema?this.schema:this.schema[n]):t},Li(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),Ji=function(t){function e(e,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return t.call(this,e,n)||this}Hi(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,o,i){return this.normalizeValue(t,e,n,r,o,i)},n.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(Qi),Yi=function(t){function e(){return t.apply(this,arguments)||this}Hi(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,o,i){var a=this;return Object.keys(t).reduce(function(e,n,u){var c,s=t[n];return null!=s?Ui({},e,((c={})[n]=a.normalizeValue(s,t,n,r,o,i),c)):e},{})},n.denormalize=function(t,e){var n=this;return Object.keys(t).reduce(function(r,o){var i,a=t[o];return Ui({},r,((i={})[o]=n.denormalizeValue(a,e),i))},{})},e}(Qi),Xi=function(t){return Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e]})},Zi=function(t,e,n,r,o,i,a){return t=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]}(t),Xi(e).map(function(e,u){return o(e,n,r,t,i,a)})},ta=function(t){function e(){return t.apply(this,arguments)||this}Hi(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,o,i){var a=this;return Xi(t).map(function(t,u){return a.normalizeValue(t,e,n,r,o,i)}).filter(function(t){return null!=t})},n.denormalize=function(t,e){var n=this;return t&&t.map?t.map(function(t){return n.denormalizeValue(t,e)}):t},e}(Qi),ea=function(t,e,n,r,o,i,a){var u=Ui({},e);return Object.keys(t).forEach(function(n){var r=t[n],c=o(e[n],e,n,r,i,a);null==c?delete u[n]:u[n]=c}),u},na=function(t,e,n){if(Wi(e))return qi(t,e,n);var r=Ui({},e);return Object.keys(t).forEach(function(e){null!=r[e]&&(r[e]=n(r[e],t[e]))}),r},ra=function t(e,n,r,o,i,a){return"object"==typeof e&&e?"object"!=typeof o||o.normalize&&"function"==typeof o.normalize?o.normalize(e,n,r,t,i,a):(Array.isArray(o)?Zi:ea)(o,e,n,r,t,i,a):e},oa={Array:ta,Entity:Vi,Object:function(){function t(t){this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce(function(e,n){var r,o=t[n];return Ui({},e,((r={})[n]=o,r))},this.schema||{})},e.normalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ea.apply(void 0,[this.schema].concat(e))},e.denormalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return na.apply(void 0,[this.schema].concat(e))},t}(),Union:Ji,Values:Yi},ia=function(){function t(){}return t.process=function(t,e){if(mi.isEmpty(e))return{};var n=t.database().schemas[t.model.entity];return function(t,e){if(!t||"object"!=typeof t)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+typeof t+'".');var n={},r=function(t){return function(e,n,r,o,i){var a=e.key,u=e.getId(r,o,i);a in t||(t[a]={});var c=t[a][u];t[a][u]=c?e.merge(c,n):n}}(n);return{entities:n,result:ra(t,t,null,e,r,[])}}(e,Array.isArray(e)?[n]:n).entities},t}(),aa=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach(function(n){var r=t.getModel(n);r.hasPivotFields()&&mi.forOwn(r.pivotFields(),function(t){mi.forOwn(t,function(t,n){t.createPivots(r,e,n)})})}),e},t}(),ua=function(){function t(){}return t.process=function(t,e){var n=this;return mi.mapValues(e,function(e,r){var o=t.newQuery(r);return o.model.hasIncrementFields()?(n.processRecordsByFields(e,o),e):e})},t.processRecordsByFields=function(t,e){var n=this,r=e.model.getIncrementFields();mi.forOwn(r,function(r,o){n.processRecords(t,e,o)})},t.processRecords=function(t,e,n){var r=this.max(t,e,n);mi.forOwn(t,function(t){"number"!=typeof t[n]&&(t[n]=++r)})},t.max=function(t,e,n){var r=e.max(n),o=Math.max.apply(Math,mi.map(t,function(t){var e=t[n];return"number"==typeof e?e:0}));return Math.max(o,r)},t}(),ca=function(){function t(){}return t.process=function(t,e){return mi.forOwn(e,function(n,r){var o=t.getModel(r).fields();mi.forOwn(n,function(t){mi.forOwn(t,function(n,r){var i=o[r];i instanceof Si&&i.attach(n,t,e)})})}),e},t}(),sa=function(){function t(){}return t.process=function(t,e){var n=this;return mi.mapValues(e,function(e,r){var o=t.newQuery(r);return n.processRecords(e,o)})},t.processRecords=function(t,e){return Object.keys(t).reduce(function(n,r){var o=t[r],i=e.model.id(o),a=String(i);return null==i||r===a?(n[r]=o,n):(n[a]=di({},o,{$id:i}),n)},{})},t}(),fa=function(){function t(){}return t.normalize=function(t,e){var n=ia.process(t,e);return n=ua.process(t,n),n=ca.process(t,n),n=aa.process(t,n),n=ua.process(t,n),n=sa.process(t,n)},t}(),la=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter(function(e){return n.check(t,e)})},t.check=function(t,e){var n=mi.groupBy(t.wheres,function(t){return t.boolean}),r=this.getComparator(t,e),o=[];return n.and&&o.push(n.and.every(r)),n.or&&o.push(n.or.some(r)),-1!==o.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"==typeof r.field){var o=new ga(t.rootState,t.entity),i=n.executeWhereClosure(o,e,r.field);if("boolean"==typeof i)return i;var a=o.get();return!mi.isEmpty(a.filter(function(t){return t.$id===e.$id}))}return"function"==typeof r.value?r.value(e[r.field]):Array.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){if(3!==n.length)return n(e,t);var r=new t.model(e);return n(e,t,r)},t}(),ha=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map(function(t){return t.field}),r=t.orders.map(function(t){return t.direction});return mi.orderBy(e,n,r)},t}(),da=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),pa=function(){function t(){}return t.where=function(t,e){return la.filter(t,e)},t.orderBy=function(t,e){return ha.filter(t,e)},t.limit=function(t,e){return da.filter(t,e)},t}(),ya=function(){function t(){}return t.with=function(t,e,n){var r=this;"*"!==e?e instanceof Array?e.forEach(function(e){return r.with(t,e,n)}):this.parseWithRelations(t,e.split("."),n):this.withAll(t)},t.withAll=function(t,e){void 0===e&&(e=function(){return null});var n=t.model.getFields();for(var r in n)n[r]instanceof Si&&this.with(t,r,e)},t.withAllRecursive=function(t,e){this.withAll(t,function(t){e>0&&t.withAllRecursive(e-1)})},t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.parseWithRelations=function(t,e,n){var r=this,o=e[0];o.split("|").forEach(function(o){1!==e.length?r.setEagerLoad(t,o):r.setEagerLoad(t,o,n)}),1!==e.length&&(e.shift(),this.addNestedWiths(t,o,e,n))},t.addNestedWiths=function(t,e,n,r){this.setEagerLoad(t,e,function(t){t.with(n.join("."),r)})},t.eagerLoadRelations=function(t,e){var n=t.model.getFields();for(var r in t.load){var o=t.load[r],i=n[r];if(i instanceof Si)i.load(t,e,r,o);else if(t.model.hasTypes()){var a=t.model.findRelationInSubTypes(r);null!==a&&a.load(t,e,r,o)}}},t}(),va=function(){function t(){}return t.has=function(t,e,n,r){this.setHas(t,e,"exists",n,r)},t.hasNot=function(t,e,n,r){this.setHas(t,e,"doesntExist",n,r)},t.whereHas=function(t,e,n){this.setHas(t,e,"exists",void 0,void 0,n)},t.whereHasNot=function(t,e,n){this.setHas(t,e,"doesntExist",void 0,void 0,n)},t.setHas=function(t,e,n,r,o,i){void 0===r&&(r=">="),void 0===o&&(o=1),void 0===i&&(i=null),"number"!=typeof r?t.have.push({relation:e,type:n,operator:r,count:o,constraint:i}):t.have.push({relation:e,type:n,operator:">=",count:r,constraint:i})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach(function(t){e.with(t.relation,t.constraint)})},t.addHasConstraints=function(t,e){var n=this.getComparators(t),r=[];e.forEach(function(t){n.every(function(e){return e(t)})&&r.push(t.$id)}),t.whereIdIn(r)},t.getComparators=function(t){var e=this;return t.have.map(function(t){return e.getComparator(t)})},t.getComparator=function(t){var e=this,n=this.getCountComparator(t.operator);return function(r){var o=e.getRelationshipCount(r[t.relation]),i=n(o,t.count);return"exists"===t.type?i:!i}},t.getRelationshipCount=function(t){return Array.isArray(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e};default:return function(t,e){return t===e}}},t}(),ma=function(){function t(t){this.indexToBeDeleted=[],this.query=t}return t.on=function(t,e,n){void 0===n&&(n=!1);var r=this.lastHookId+1;return this.lastHookId=r,this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({callback:e,once:n,uid:r}),r},t.off=function(t){var e=this,n=!1;return Object.keys(this.hooks).some(function(r){var o=e.hooks[r],i=o.findIndex(function(e){return e.uid===t});return-1!==i&&(o.splice(i,1),n=!0),n}),n},t.prototype.self=function(){return this.constructor},t.prototype.getHook=function(t){return this.query.model[t]||null},t.prototype.getGlobalHook=function(t){return this.self().hooks[t]||null},t.prototype.has=function(t){return!!this.getHook(t)||!!this.getGlobalHook(t)},t.prototype.executeSelectHook=function(t,e){return this.has(t)?(e=this.executeLocalSelectHook(t,e),e=this.executeGlobalSelectHook(t,e)):e},t.prototype.executeLocalSelectHook=function(t,e){var n=this.getHook(t);return n?n(e,this.query.entity):e},t.prototype.executeGlobalSelectHook=function(t,e){var n=this,r=this.getGlobalHook(t);if(!r)return e;var o=[];return r.forEach(function(t,r){var i=t.callback,a=t.once;e=i.call(n.query,e,n.query.entity),a&&o.push(r)}),o.reverse().forEach(function(t){r.splice(t,1)}),e},t.prototype.executeMutationHookOnRecords=function(t,e){var n=this;this.has(t)&&(Object.keys(e).forEach(function(r){!1===n.executeMutationHook(t,e[r])&&delete e[r]}),this.removeGlobalHook(t))},t.prototype.executeMutationHook=function(t,e){return!1!==this.executeLocalMutationHook(t,e)&&(!1!==this.executeGlobalMutationHook(t,e)&&void 0)},t.prototype.executeLocalMutationHook=function(t,e){var n=this.getHook(t);if(n)return n(e,this.query.entity)},t.prototype.executeGlobalMutationHook=function(t,e){var n=this,r=this.getGlobalHook(t);if(r){var o=[];return r.forEach(function(t,r){o.push(t.callback.call(n.query,e,n.query.entity)),t.once&&n.indexToBeDeleted.push(r)}),!o.includes(!1)&&void 0}},t.prototype.removeGlobalHook=function(t){var e=this.getGlobalHook(t);e&&this.indexToBeDeleted.reverse().forEach(function(t){e.splice(t,1)})},t.hooks={},t.lastHookId=0,t}(),ga=function(){function t(t,e){this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.appliedOnBase=!0;var n=this.getBase(e);this.state=t[n.entity],this.appliedOnBase=n.entity===e,this.rootState=t,this.entity=e,this.model=this.getModel(e),this.module=this.getModule(e),this.hook=new ma(this)}return t.database=function(){return fi.database},t.getModel=function(t){return this.database().model(t)},t.getBase=function(t){return this.database().baseModel(t)},t.getModels=function(){return this.database().models()},t.getModule=function(t){return this.database().module(t)},t.getModules=function(){return this.database().modules()},t.deleteAll=function(t){var e=this,n=this.getModels();mi.forOwn(n,function(n,r){t[r]&&new e(t,r).deleteAll()})},t.on=function(t,e,n){return ma.on(t,e,n)},t.off=function(t){return ma.off(t)},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.rootState,e)},t.prototype.database=function(){return this.self().database()},t.prototype.getModel=function(t){var e=t||this.entity;return this.self().getModel(e)},t.prototype.getModels=function(){return this.self().getModels()},t.prototype.getBase=function(t){return this.self().getBase(t)},t.prototype.getModule=function(t){var e=t||this.entity;return this.self().getModule(e)},t.prototype.getModules=function(){return this.self().getModules()},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){return this.item(this.state.data[t])},t.prototype.findIn=function(t){var e=this;return t.map(function(t){return e.state.data[t]}).filter(function(t){return t})},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return this.item(t[0])},t.prototype.last=function(){var t=this.select();return this.item(t[t.length-1])},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var n=Array.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(n),this):(this.where(t,n),this)},t.prototype.isIdfilterable=function(t){return t===this.model.primaryKey&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,n=Array.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(n.filter(function(t){return e.idFilter.has(t)})):this.idFilter=new Set(n)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter(function(t){return e.joinedIdFilter.has(t)})):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({field:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),ya.with(this,t,e),this},t.prototype.withAll=function(){return ya.withAll(this),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),ya.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return va.has(this,t,e,n),this},t.prototype.hasNot=function(t,e,n){return va.hasNot(this,t,e,n),this},t.prototype.whereHas=function(t,e){return va.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return va.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().map(function(e){var n=t.state.data[e],r=n instanceof Ti?n:t.hydrate(n);return t.appliedOnBase||r instanceof t.model?r:null}).filter(function(t){return null!==t})},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;return this.idFilter&&this.joinedIdFilter?Array.from(this.idFilter.values()).filter(function(e){return t.joinedIdFilter.has(e)}):this.idFilter||this.joinedIdFilter?Array.from((this.idFilter||this.joinedIdFilter).values()):Object.keys(this.state.data)},t.prototype.select=function(){va.applyConstraints(this);var t=this.records();return t=this.hook.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.hook.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.hook.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.hook.executeSelectHook("afterLimit",t)},t.prototype.filterWhere=function(t){return pa.where(this,t)},t.prototype.filterOrderBy=function(t){return pa.orderBy(this,t)},t.prototype.filterLimit=function(t){return pa.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce(function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e},[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce(function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e},[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce(function(e,n){return"number"==typeof n[t]&&(e+=n[t]),e},0)},t.prototype.item=function(t){if(!t)return null;if(Object.keys(this.load).length>0){t=new(this.model.getModelFromRecord(t))(t);var e=this.hook.executeSelectHook("beforeRelations",[t]);t=e[0],ya.eagerLoadRelations(this,[t]),t=(e=this.hook.executeSelectHook("afterRelations",[t]))[0]}return t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map(function(t){return new(e.model.getModelFromRecord(t))(t)}),t=this.hook.executeSelectHook("beforeRelations",t),ya.eagerLoadRelations(this,t),t=this.hook.executeSelectHook("afterRelations",t)),t)},t.prototype.new=function(){var t=(new this.model).$toJson();return this.insert(t,{})[this.entity][0]},t.prototype.create=function(t,e){return this.persist(t,"create",e)},t.prototype.createMany=function(t){var e=this,n=this.hydrateMany(t);return this.commit("create",n,function(){e.emptyState(),e.state.data=di({},e.state.data,n)}),this.map(n)},t.prototype.insert=function(t,e){return this.persist(t,"insert",e)},t.prototype.insertMany=function(t){var e=this,n=this.hydrateMany(t);return this.commit("create",n,function(){e.state.data=di({},e.state.data,n)}),this.map(n)},t.prototype.update=function(t,e,n){if(Array.isArray(t))return this.persist(t,"update",n);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist(t,"update",n);if(Array.isArray(this.model.primaryKey))throw new Error("\n        You can't specify `where` value as `string` or `number` when you\n        have a composite key defined in your model. Please include composite\n        keys to the `data` fields.\n      ");return this.updateById(t,e)},t.prototype.updateMany=function(t){var e=this.combine(t);return this.commitUpdate(e)},t.prototype.updateById=function(t,e){var n;e="number"==typeof e?e.toString():e;var r=this.state.data[e];if(!r)return null;var o=((n={})[e]=this.processUpdate(t,r),n);return this.commitUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var n=this,r=Object.keys(this.state.data).reduce(function(r,o){var i=n.state.data[o];return e(i)?(r[o]=n.processUpdate(t,i),r):r},{});return this.commitUpdate(r)},t.prototype.processUpdate=function(t,e){return"function"==typeof t?(t(e),e):e.constructor!==this.model&&e instanceof Ti?this.hydrate(di({},e,t),e.constructor):this.hydrate(di({},e,t))},t.prototype.commitUpdate=function(t){var e=this;return t=this.updateIndexes(t),this.commit("update",t,function(){e.state.data=di({},e.state.data,t)}),this.map(t)},t.prototype.updateIndexes=function(t){var e=this;return Object.keys(t).reduce(function(t,n){var r=t[n],o=String(e.model.id(r));return n!==o&&(r.$id=o,t[o]=r,delete t[n]),t},t)},t.prototype.insertOrUpdate=function(t,e){return this.persist(t,"insertOrUpdate",e)},t.prototype.insertOrUpdateMany=function(t){var e=this,n={},r={};return Object.keys(t).forEach(function(o){var i=t[o];e.state.data[o]?r[o]=i:n[o]=i}),this.insertMany(n).concat(this.updateMany(r))},t.prototype.persist=function(t,e,n){var r=this;return t=this.normalize(t),mi.isEmpty(t)?("create"===e&&this.emptyState(),{}):Object.keys(t).reduce(function(o,i){var a=r.newQuery(i)[r.getPersistMethod(i,e,n)+"Many"](t[i]);return a.length>0&&(o[i]=a),o},{})},t.prototype.getPersistMethod=function(t,e,n){return n.create&&n.create.includes(t)?"create":n.insert&&n.insert.includes(t)?"insert":n.update&&n.update.includes(t)?"update":n.insertOrUpdate&&n.insertOrUpdate.includes(t)?"insertOrUpdate":e},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteById=function(t){var e;t="number"==typeof t?t.toString():t;var n=this.state.data[t];if(!n)return null;var r=((e={})[t]=n,e);return this.commitDelete(r)[0]},t.prototype.deleteByCondition=function(t){var e=this,n=Object.keys(this.state.data).reduce(function(n,r){var o=e.state.data[r];return t(o)?(n[r]=o,n):n},{});return this.commitDelete(n)},t.prototype.deleteAll=function(){var t=this,e=this.state.data;this.appliedOnBase||(e=Object.keys(this.state.data).reduce(function(e,n){return t.state.data[n]instanceof t.model&&(e[n]=t.state.data[n]),e},{})),this.commitDelete(e)},t.prototype.commitDelete=function(t){var e=this;return this.commit("delete",t,function(){var n=Object.keys(t);e.state.data=Object.keys(e.state.data).reduce(function(t,r){return n.includes(r)||(t[r]=e.state.data[r]),t},{})}),this.map(t)},t.prototype.normalize=function(t){return fa.normalize(this,t)},t.prototype.hydrate=function(t,e){if(void 0!==e)return new e(t);var n=this.model;if(t){var r=n.getModelFromRecord(t);if("function"==typeof r)return new r(t);if(!this.appliedOnBase){var o=n.getTypeKeyValueFromModel();null!==o&&(t[n.typeKey]=o)}}return new n(t)},t.prototype.hydrateMany=function(t){var e=this;return Object.keys(t).reduce(function(n,r){var o=t[r];return n[r]=e.hydrate(o),n},{})},t.prototype.combine=function(t){var e=this;return Object.keys(t).reduce(function(n,r){var o=e.state.data[r];if(!o)return n;var i=t[r];return o.constructor!==e.model&&o instanceof Ti?(n[r]=e.hydrate(di({},o,i),o.constructor),n):(n[r]=e.hydrate(di({},o,i)),n)},{})},t.prototype.map=function(t){return Object.keys(t).map(function(e){return t[e]})},t.prototype.commit=function(t,e,n){var r=""+t.charAt(0).toUpperCase()+t.slice(1);this.hook.executeMutationHookOnRecords("before"+r,e),n(),this.hook.executeMutationHookOnRecords("after"+r,e)},t.prototype.emptyState=function(){if(this.appliedOnBase)this.state.data={};else for(var t in this.state.data)this.state.data[t]instanceof this.model&&delete this.state.data[t]},t}(),ba={query:function(t,e,n,r){return function(){return r[t.$connection+"/query"](t.$name)}},all:function(t,e,n,r){return function(){return r[t.$connection+"/all"](t.$name)}},find:function(t,e,n,r){return function(e){return r[t.$connection+"/find"](t.$name,e)}},findIn:function(t,e,n,r){return function(e){return r[t.$connection+"/findIn"](t.$name,e)}}},wa={new:function(t){var e=t.state,n=e.$name;return t.dispatch(e.$connection+"/new",{entity:n},{root:!0})},create:function(t,e){var n=t.state,r=n.$name;return t.dispatch(n.$connection+"/create",di({},e,{entity:r}),{root:!0})},insert:function(t,e){var n=t.state,r=n.$name;return t.dispatch(n.$connection+"/insert",di({},e,{entity:r}),{root:!0})},update:function(t,e){var n=t.state,r=n.$name;return Array.isArray(e)?t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0}):void 0===e.data?t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0}):t.dispatch(n.$connection+"/update",di({entity:r},e),{root:!0})},insertOrUpdate:function(t,e){var n=t.state,r=n.$name;return t.dispatch(n.$connection+"/insertOrUpdate",di({entity:r},e),{root:!0})},delete:function(t,e){var n=t.state,r=n.$name,o="object"==typeof e?e.where:e;return t.dispatch(n.$connection+"/delete",{entity:r,where:o},{root:!0})},deleteAll:function(t){var e=t.state,n=e.$name;return t.dispatch(e.$connection+"/deleteAll",{entity:n},{root:!0})}},_a={query:function(t){return function(e){return new ga(t,e)}},all:function(t){return function(e){return new ga(t,e).all()}},find:function(t){return function(e,n){return new ga(t,e).find(n)}},findIn:function(t){return function(e,n){return new ga(t,e).findIn(n)}}},Oa={new:function(t,e){var n={data:{}};return t.commit("new",di({},e,{result:n})),n.data},create:function(t,e){return pi(this,void 0,void 0,function(){var n;return yi(this,function(r){return n={data:{}},t.commit("create",di({},e,{result:n})),[2,n.data]})})},insert:function(t,e){return pi(this,void 0,void 0,function(){var n;return yi(this,function(r){return n={data:{}},t.commit("insert",di({},e,{result:n})),[2,n.data]})})},update:function(t,e){return pi(this,void 0,void 0,function(){var n;return yi(this,function(r){return n={data:{}},t.commit("update",di({},e,{result:n})),[2,n.data]})})},insertOrUpdate:function(t,e){return pi(this,void 0,void 0,function(){var n;return yi(this,function(r){return n={data:{}},t.commit("insertOrUpdate",di({},e,{result:n})),[2,n.data]})})},delete:function(t,e){return pi(this,void 0,void 0,function(){var n;return yi(this,function(r){return n={data:{}},t.commit("delete",di({},e,{result:n})),[2,n.data]})})},deleteAll:function(t,e){return pi(this,void 0,void 0,function(){return yi(this,function(n){return e&&e.entity?(t.commit("deleteAll",{entity:e.entity}),[2]):(t.commit("deleteAll"),[2])})})}},ja=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}(),ka={$mutate:function(t,e){e.callback(t[e.entity])},new:function(t,e){var n=e.entity;e.result.data=new ga(t,n).new()},create:function(t,e){var n=e.entity,r=e.data,o=ja.createPersistOptions(e);e.result.data=new ga(t,n).create(r,o)},insert:function(t,e){var n=e.entity,r=e.data,o=ja.createPersistOptions(e);e.result.data=new ga(t,n).insert(r,o)},update:function(t,e){var n=e.entity,r=e.data,o=e.where||null,i=ja.createPersistOptions(e);e.result.data=new ga(t,n).update(r,o,i)},insertOrUpdate:function(t,e){var n=e.entity,r=e.data,o=ja.createPersistOptions(e);e.result.data=new ga(t,n).insertOrUpdate(r,o)},delete:function(t,e){var n=e.entity,r=e.where;e.result.data=new ga(t,n).delete(r)},deleteAll:function(t,e){e&&e.entity?new ga(t,e.entity).deleteAll():ga.deleteAll(t)}};var Sa=function(){function t(){}return t.create=function(t){return function(e,n,r){var o=t.id(e);return null==o||""===o?Bi.get():o}},t}(),Ea=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,o){var i=e.getId(t,n);return di({},n,{$id:i})}},t.getId=function(t,e){var n=t.id(e);return null==n||""===n?Bi.increment():n},t}(),Ia=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach(function(t){e.one(n[t])})}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new oa.Entity(t.entity,{},{idAttribute:Sa.create(t),processStrategy:Ea.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){return new oa.Array(this.one(t))},t.prototype.union=function(t){return new oa.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.fields();return Object.keys(n).reduce(function(t,r){var o=n[r];return o instanceof Si&&(t[r]=o.define(e)),t},{})},t}(),xa=function(){function t(){}return t.create=function(t,e,n){var r={namespaced:!0,state:{$name:t},getters:_a,actions:Oa,mutations:ka,modules:{}};return this.createModules(r,t,e,n)},t.createModules=function(t,e,n,r){var o=this;return Object.keys(r).forEach(function(i){var a=n[i],u=r[i];t.modules[i]={namespaced:!0},t.modules[i].state=o.createState(e,i,a,u),t.getters[i]=function(t,e,n,r){return function(){return e.query(i)}},t.modules[i].getters=di({},ba,u.getters),t.modules[i].actions=di({},wa,u.actions),t.modules[i].mutations=u.mutations||{}}),t},t.createState=function(t,e,n,r){var o="function"==typeof n.state?n.state():n.state,i="function"==typeof r.state?r.state():r.state;return di({},o,i,{$connection:t,$name:e,data:{}})},t}(),Aa=function(){function t(){this.entities=[],this.schemas={}}return t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.registerModules(),this.createSchema()},t.prototype.register=function(t,e){if(void 0===e&&(e={}),t.baseEntity){var n=this.model(t.baseEntity);n&&(n.types,Ti.types),0}this.entities.push({name:t.entity,base:t.baseEntity||t.entity,model:t,module:e})},t.prototype.model=function(t){return this.models()[t]},t.prototype.baseModel=function(t){return this.baseModels()[t]},t.prototype.models=function(){return this.entities.reduce(function(t,e){return t[e.name]=e.model,t},{})},t.prototype.baseModels=function(){var t=this;return this.entities.reduce(function(e,n){return e[n.name]=t.model(n.base),e},{})},t.prototype.module=function(t){return this.modules()[t]},t.prototype.modules=function(){return this.entities.reduce(function(t,e){return t[e.name]=e.module,t},{})},t.prototype.registerModules=function(){var t=xa.create(this.namespace,this.models(),this.modules());this.store.registerModule(this.namespace,t)},t.prototype.createSchema=function(){var t=this;this.entities.forEach(function(e){t.schemas[e.name]=Ia.create(e.model)})},t}();var Fa={database:new Aa,name:"vuex",localforage:{name:"vuex"},actions:{$fetch:"$fetch",$get:"$get",$create:"$create",$update:"$update",$delete:"$delete"},generateId:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"".concat(t()).concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())},autoFetch:!0},Ra=function(){function t(e,n){if(o()(this,t),this.components=e,this.options=Lr({},Fa,n),this.database=n.database,this.options.localforage||(this.options.localforage={name:this.options.name}),!n.database)throw new Error("database option is required to initialise!")}return a()(t,[{key:"getModelFromState",value:function(t){return no(this.database.entities,{name:t.$name}).model}},{key:"getModelByEntity",value:function(t){return no(this.database.entities,{name:t}).model}}],[{key:"setup",value:function(e,n){return this.instance=new t(e,n),this.instance}},{key:"getInstance",value:function(){return this.instance}}]),t}(),Ma=n(15),$a=n.n(Ma),Ka=function(){function t(){o()(this,t)}return a()(t,null,[{key:"transformModel",value:function(t){var e=Ra.getInstance();t.localforage=Lr({storeName:t.entity},t.localforage||{});var n=t.getIndexIdFromRecord?"getIndexIdFromRecord":"id",r=t[n];return"function"==typeof r&&(t[n]=function(n){return(Array.isArray(this.primaryKey)?this.primaryKey:[this.primaryKey]).forEach(function(t){n[t]||(n[t]=e.options.generateId(n))}),r.call(t,n)}),t.$localStore=$a.a.createInstance(Lr({},Ra.getInstance().options.localforage,t.localforage)),t}},{key:"getRecordKey",value:function(t){return"string"==typeof t.$id?t.$id:String(t.$id)}}]),t}(),Pa=n(3),Na=n.n(Pa),Ca=n(4),Ba=n.n(Ca),Ta=n(5),za=n.n(Ta),La=n(6),Da=n.n(La),Ua=n(7),Ha=n.n(Ua),Wa=function(t){function e(){return o()(this,e),za()(this,Da()(e).apply(this,arguments))}var n;return Ha()(e,t),a()(e,null,[{key:"call",value:(n=Ba()(Na.a.mark(function t(e){var n,r,o,i,a;return Na.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,o=Ra.getInstance(),i=o.getModelFromState(n),a=[],t.abrupt("return",i.$localStore.iterate(function(t){a.push(t)}).then(function(){return r("insertOrUpdate",{data:a})}));case 5:case"end":return t.stop()}},t)})),function(t){return n.apply(this,arguments)})}]),e}(Ka),qa=function(){function t(){o()(this,t)}return a()(t,null,[{key:"isFieldAttribute",value:function(t){var e=Ra.getInstance();return t instanceof e.components.Increment||t instanceof e.components.Attr||t instanceof e.components.String||t instanceof e.components.Number||t instanceof e.components.Boolean}},{key:"getPersistableFields",value:function(e){var n=e.getFields();return Object.keys(n).filter(function(e){return t.isFieldAttribute(n[e])})}}]),t}(),Ga=function(t){function e(){return o()(this,e),za()(this,Da()(e).apply(this,arguments))}var n;return Ha()(e,t),a()(e,null,[{key:"call",value:(n=Ba()(Na.a.mark(function t(e,n){var r,o,i=this,a=arguments;return Na.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.dispatch,o=a.length>2&&void 0!==a[2]?a[2]:"insertOrUpdate",t.abrupt("return",r(o,n).then(function(t){var e=[];return Array.isArray(t)?e=t:"function"==typeof t.$self?e.push(t):Object.keys(t).forEach(function(n){t[n].forEach(function(t){e.push(t)})}),Promise.all(e.map(function(t){var e=t.$self(),n=i.getRecordKey(t),r=qa.getPersistableFields(e).reduce(function(e,n){return e[n]=t[n],e},{});return e.$localStore.setItem(n,r)}))}));case 3:case"end":return t.stop()}},t)})),function(t,e){return n.apply(this,arguments)})},{key:"create",value:function(t,e){return this.call(t,e)}},{key:"update",value:function(t,e){var n=e.where?"update":"insertOrUpdate";return this.call(t,e,n)}}]),e}(Ka),Va=n(11),Qa=n.n(Va),Ja=function(t){function e(){return o()(this,e),za()(this,Da()(e).apply(this,arguments))}var n;return Ha()(e,t),a()(e,null,[{key:"call",value:(n=Ba()(Na.a.mark(function t(e,n){var r,o,i,a,u;return Na.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,o=e.dispatch,i=Ra.getInstance(),a=i.getModelFromState(r),!(u="object"===Qa()(n)?n.id:n)){t.next=6;break}return t.abrupt("return",a.$localStore.getItem(u).then(function(t){return o("insertOrUpdate",{data:t})}));case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}},t)})),function(t,e){return n.apply(this,arguments)})}]),e}(Ka),Ya=function(t){function e(){return o()(this,e),za()(this,Da()(e).apply(this,arguments))}var n;return Ha()(e,t),a()(e,null,[{key:"call",value:(n=Ba()(Na.a.mark(function t(e,n){var r,o,i=this;return Na.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,o=e.dispatch,t.abrupt("return",o("delete",n).then(function(t){var e=Ra.getInstance(),n=Array.isArray(t)?t:[t],o=e.getModelFromState(r),a=n.map(function(t){var e=i.getRecordKey(t);return o.$localStore.removeItem(e)});return Promise.all(a).then(function(){return t})}));case 2:case"end":return t.stop()}},t)})),function(t,e){return n.apply(this,arguments)})}]),e}(Ka),Xa=function(){function t(e,n){o()(this,t),Ra.setup(e,n),this.setupActions(),this.setupModels()}return a()(t,[{key:"setupActions",value:function(){var t=Ra.getInstance(),e=t.options.actions;t.components.Actions[e.$get]=Ja.call.bind(Ja),t.components.Actions[e.$fetch]=Wa.call.bind(Wa),t.components.Actions[e.$create]=Ga.create.bind(Ga),t.components.Actions[e.$update]=Ga.update.bind(Ga),t.components.Actions[e.$delete]=Ya.call.bind(Ya)}},{key:"setupModels",value:function(){var t=Ra.getInstance(),e=t.options.actions;Zn(t.database.entities,function(t){return t.model=Ka.transformModel(t.model),t}),t.components.Model[e.$fetch]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatch(e.$fetch,t)},t.components.Model[e.$get]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatch(e.$get,t)},t.components.Model[e.$create]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatch(e.$create,t)},t.components.Model[e.$update]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatch(e.$update,t)},t.components.Model[e.$delete]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatch(e.$delete,t)}}}]),t}(),Za=function(){function t(){o()(this,t)}return a()(t,null,[{key:"install",value:function(t,e){return new Xa(t,e)}}]),t}();e.default=Za}]).default});